@use '../../../../styles/_variables' as vars;
@use '../../../../styles/_mixins' as mixins;

:host {
  // ============================================
  // Base Layout & Structure
  // ============================================
  display: inline-flex;
  position: relative;
  overflow: hidden;
  z-index: 0;
  gap: var(--mglon-button-group-gap, 0);
  flex-shrink: 0; // Prevent shrinking in flex containers

  // ============================================
  // Default Styling
  // ============================================
  background-color: var(--mglon-button-group-background, var(--mglon-schedule-surface-1));
  border: var(--mglon-button-group-border-width, 2px) solid var(--mglon-button-group-border-color, transparent);
  padding: var(--mglon-button-group-padding, var(--mglon-schedule-padding-xs));
  border-radius: var(--mglon-button-group-border-radius, var(--mglon-schedule-radius-full));

  // ============================================
  // Border Radius Variants
  // ============================================
  &[rounded="none"] {
    --mglon-button-group-border-radius: 0;
  }

  &[rounded="sm"] {
    --mglon-button-group-border-radius: var(--mglon-schedule-radius-sm);
  }

  &[rounded="md"] {
    --mglon-button-group-border-radius: var(--mglon-schedule-radius-md);
  }

  &[rounded="lg"] {
    --mglon-button-group-border-radius: var(--mglon-schedule-radius-lg);
  }

  &[rounded="full"] {
    --mglon-button-group-border-radius: var(--mglon-schedule-radius-full);
  }

  // ============================================
  // Orientation Variants
  // ============================================
  &[orientation="vertical"] {
    flex-direction: column;
  }

  // ============================================
  // Appearance Variants
  // ============================================
  &[appereance="outline"] {
    --mglon-button-group-background: transparent;
    --mglon-button-group-border-color: var(--mglon-schedule-primary-200);
  }

  &[appereance="ghost"] {
    --mglon-button-group-background: transparent;
    --mglon-button-group-border-color: transparent;
    --mglon-button-group-padding: 0px;
  }

  &[appereance="link"] {
    --mglon-button-group-background: transparent;
    --mglon-button-group-border-color: transparent;
    --mglon-button-group-padding: 0px;
    --mglon-button-group-gap: var(--mglon-schedule-spacing-sm);
  }

  // ============================================
  // Density Variants
  // ============================================
  &[density="compact"] {
    --mglon-button-group-padding: 0px;

    &[appereance="link"] {
      --mglon-button-group-gap: var(--mglon-schedule-spacing-xs);
    }
  }

  // ============================================
  // Disabled State
  // ============================================
  &[disabled] {
    opacity: var(--mglon-button-group-disabled-opacity, 0.5);
    cursor: not-allowed;
    pointer-events: none; // Prevent all click events on the group

    .selection-indicator {
      pointer-events: none;
    }

    button,
    a {
      pointer-events: none;
    }
  }

  // ============================================
  // Selection Indicator
  // ============================================
  .selection-indicator {
    position: absolute;
    top: 0;
    left: 0;
    background-color: var(--mglon-button-group-indicator-background, var(--mglon-schedule-primary));
    border-radius: calc(var(--mglon-button-group-border-radius, var(--mglon-schedule-radius-full)) - var(--mglon-button-group-padding, var(--mglon-schedule-padding-xs)));
    z-index: 0;
    transition: all var(--mglon-button-group-indicator-transition-duration, 0.4s) cubic-bezier(0.16, 1, 0.3, 1);
  }

  // ============================================
  // Projected Button Styles
  // ============================================
  ::ng-deep>button[mglon-button],
  ::ng-deep>button[mglon-icon-button],
  ::ng-deep>a[mglon-button],
  ::ng-deep>a[mglon-icon-button] {
    // Reset styles
    background-color: transparent !important;
    border: none !important;
    margin: 0 !important;

    // Positioning
    position: relative;
    z-index: 1;

    // Inherit group radius
    border-radius: var(--mglon-button-group-border-radius, var(--mglon-schedule-radius-full)) !important;

    // Text color states
    color: var(--mglon-button-group-button-color, var(--mglon-schedule-on-surface-1));
    transition: color var(--mglon-button-group-transition-duration, 0.3s) ease;

    &[active] {
      color: var(--mglon-button-group-button-active-color, var(--mglon-schedule-on-primary)) !important;
      font-weight: var(--mglon-button-group-button-active-font-weight, 500);
    }

    // Individual button disabled state
    &[disabled] {
      opacity: var(--mglon-button-group-disabled-opacity, 0.5);
      cursor: not-allowed;
      pointer-events: none;
    }
  }
}
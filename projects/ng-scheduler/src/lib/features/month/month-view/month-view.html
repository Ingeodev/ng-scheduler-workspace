<div class="mglon-month-view">
  <!-- Single scrollable container for header and grid -->
  <div class="mglon-month-view__content">
    <!-- Header wrapper -->
    <div class="mglon-month-view__header-wrapper">
      <mglon-month-header></mglon-month-header>
    </div>

    <!-- Grid container with reference -->
    <div class="mglon-month-view__grid-container" #gridRef>
      <mglon-month-grid [currentDate]="calendarStore.currentDate()"></mglon-month-grid>

      <!-- Events overlay -->
      <div class="mglon-month-view__events-layer">
        @for (item of eventsToRender().events; track item.event.id) {
        <mglon-event-render [event]="item.event" [renderData]="item.renderData" [eventColor]="item.color"
          [showTime]="false" (eventClicked)="onEventClick($event)">
        </mglon-event-render>
        }

        <!-- Overflow indicators -->
        @for (indicator of overflowIndicators(); track $index) {
        <mglon-event-overflow-indicator [count]="indicator.count" [showAll]="indicator.showAll"
          (indicatorClick)="onIndicatorClick($event, indicator.hiddenEvents)" [style.--indicator-x]="indicator.left"
          [style.--indicator-y.px]="indicator.top" [style.--indicator-width]="indicator.width">
        </mglon-event-overflow-indicator>
        }
      </div>
    </div>
  </div>
</div>